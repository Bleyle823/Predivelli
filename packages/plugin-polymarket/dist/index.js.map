{"version":3,"sources":["../src/provider.ts","../src/actions.ts","../src/index.ts"],"names":["responseContext","response"],"mappings":"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","file":"index.js","sourcesContent":["import type { Provider, IAgentRuntime } from \"@elizaos/core\";\nimport { ClobClient, Chain } from \"@polymarket/clob-client\";\nimport { Wallet } from \"@ethersproject/wallet\";\nimport * as fs from 'fs';\nimport * as path from 'path';\n\n// Load API credentials from JSON file\nfunction loadApiCredentials(): { key: string; secret: string; passphrase: string } | null {\n    try {\n        // Try to load from the agent directory first\n        const agentPath = path.join(process.cwd(), 'agent', 'polymarket_api_keys.json');\n        const rootPath = path.join(process.cwd(), 'polymarket_api_keys.json');\n        \n        let credentialsPath = null;\n        if (fs.existsSync(agentPath)) {\n            credentialsPath = agentPath;\n        } else if (fs.existsSync(rootPath)) {\n            credentialsPath = rootPath;\n        }\n        \n        if (credentialsPath) {\n            const credentials = JSON.parse(fs.readFileSync(credentialsPath, 'utf8'));\n            return credentials;\n        }\n        \n        return null;\n    } catch (error) {\n        console.error(\"Failed to load API credentials:\", error);\n        return null;\n    }\n}\n\nexport async function getPolymarketClient(): Promise<ClobClient> {\n    // Get configuration from environment variables\n    const host = process.env.CLOB_API_URL || \"https://clob.polymarket.com\";\n    const chainId = parseInt(`${process.env.CHAIN_ID || Chain.POLYGON}`) as Chain;\n    \n    // For authenticated operations, you might need these\n    const apiKey = process.env.POLYMARKET_API_KEY;\n    const secret = process.env.POLYMARKET_SECRET;\n    const passphrase = process.env.POLYMARKET_PASSPHRASE;\n\n    try {\n        // Initialize ClobClient with host and chainId\n        const client = new ClobClient(host, chainId);\n        \n        // If credentials are provided, you might need to authenticate\n        // This depends on the specific API requirements\n        if (apiKey && secret && passphrase) {\n            console.log(\" Polymarket credentials detected - authenticated mode\");\n            // The authentication might be handled differently depending on the client version\n            // You may need to call specific auth methods here\n        } else {\n            console.log(\" Polymarket running in read-only mode\");\n        }\n        \n        return client;\n    } catch (error) {\n        console.error(\"Failed to initialize Polymarket ClobClient:\", error);\n        throw new Error(`Failed to initialize Polymarket ClobClient: ${error instanceof Error ? error.message : 'Unknown error'}`);\n    }\n}\n\nexport async function getAuthenticatedPolymarketClient(runtime: IAgentRuntime): Promise<ClobClient> {\n    // Get configuration from environment variables or runtime settings\n    const host = process.env.CLOB_API_URL || \"https://clob.polymarket.com\";\n    const chainId = parseInt(`${process.env.CHAIN_ID || Chain.POLYGON}`) as Chain;\n    \n    // Get wallet private key from runtime settings or environment variables\n    let privateKey = process.env.PK || process.env.PRIVATE_KEY || process.env.WALLET_PRIVATE_KEY;\n    \n    if (!privateKey) {\n        try {\n            privateKey = runtime.getSetting(\"WALLET_PRIVATE_KEY\") as string;\n        } catch (error) {\n            console.log(\"Could not load private key from runtime settings:\", error);\n        }\n    }\n    \n    if (!privateKey) {\n        throw new Error(\"Wallet private key is required for authenticated operations! Please set WALLET_PRIVATE_KEY in environment variables or runtime settings.\");\n    }\n    \n    // Try to get credentials from environment variables first, then from runtime settings, then from JSON file\n    let apiKey = process.env.POLYMARKET_API_KEY;\n    let secret = process.env.POLYMARKET_SECRET;\n    let passphrase = process.env.POLYMARKET_PASSPHRASE;\n    \n    // If not in environment variables, try to get from runtime settings\n    if (!apiKey || !secret || !passphrase) {\n        try {\n            apiKey = apiKey || runtime.getSetting(\"POLYMARKET_API_KEY\") as string;\n            secret = secret || runtime.getSetting(\"POLYMARKET_SECRET\") as string;\n            passphrase = passphrase || runtime.getSetting(\"POLYMARKET_PASSPHRASE\") as string;\n            \n            if (apiKey && secret && passphrase) {\n                console.log(\" Loaded Polymarket credentials from runtime settings\");\n            }\n        } catch (error) {\n            console.log(\"Could not load credentials from runtime settings:\", error);\n        }\n    }\n    \n    // If still not available, try to load from JSON file\n    if (!apiKey || !secret || !passphrase) {\n        const credentials = loadApiCredentials();\n        if (credentials) {\n            apiKey = credentials.key;\n            secret = credentials.secret;\n            passphrase = credentials.passphrase;\n            console.log(\" Loaded Polymarket credentials from JSON file\");\n        }\n    }\n    \n    if (!apiKey || !secret || !passphrase) {\n        throw new Error(\"API Credentials are needed to interact with this endpoint! Please set POLYMARKET_API_KEY, POLYMARKET_SECRET, and POLYMARKET_PASSPHRASE in environment variables, runtime settings, or provide a polymarket_api_keys.json file.\");\n    }\n\n    try {\n        // Create wallet from private key\n        const wallet = new Wallet(privateKey);\n        console.log(\" Wallet created with address:\", wallet.address);\n        \n        // Initialize ClobClient with host, chainId, and wallet\n        const client = new ClobClient(host, chainId, wallet);\n        \n        // Store credentials in the client instance for later use\n        // The ClobClient may need these for signing operations\n        (client as any).apiCredentials = {\n            key: apiKey,\n            secret: secret,\n            passphrase: passphrase\n        };\n        \n        console.log(\" Polymarket client created with wallet signer\");\n        return client;\n    } catch (error) {\n        console.error(\"Failed to initialize authenticated Polymarket ClobClient:\", error);\n        throw new Error(`Failed to initialize authenticated Polymarket ClobClient: ${error instanceof Error ? error.message : 'Unknown error'}`);\n    }\n}\n\nexport const polymarketProvider: Provider = {\n    async get(runtime: IAgentRuntime): Promise<string | null> {\n        try {\n            const client = await getPolymarketClient();\n            \n            // Test the connection by fetching markets and analyzing active ones\n            const markets = await client.getMarkets();\n            let totalCount = 0;\n            let activeCount = 0;\n            let acceptingOrdersCount = 0;\n            \n            if (Array.isArray(markets)) {\n                totalCount = markets.length;\n                // Count active markets\n                activeCount = markets.filter((market: any) => market.active !== false).length;\n                acceptingOrdersCount = markets.filter((market: any) => market.accepting_orders !== false).length;\n            } else if (markets && typeof markets === 'object') {\n                const response = markets as any;\n                if (response.data && Array.isArray(response.data)) {\n                    totalCount = response.data.length;\n                    activeCount = response.data.filter((market: any) => market.active !== false).length;\n                    acceptingOrdersCount = response.data.filter((market: any) => market.accepting_orders !== false).length;\n                }\n            }\n            \n            const status = acceptingOrdersCount > 0 ? \"\" : \n                          (activeCount > 0 ? \"\" : \"\");\n            \n            return `Polymarket Client: ${status} Connected (${totalCount} total, ${activeCount} active, ${acceptingOrdersCount} accepting orders)`;\n        } catch (error) {\n            console.error(\"Error in Polymarket provider:\", error);\n            return ` Error connecting to Polymarket: ${error instanceof Error ? error.message : 'Unknown error'}`;\n        }\n    },\n};\n\n// Legacy provider for backward compatibility\nexport const walletProvider = polymarketProvider;\n\n// Legacy function for backward compatibility  \nexport const getClient = getPolymarketClient;","import {\n    type Action,\n    generateText,\n    type HandlerCallback,\n    type IAgentRuntime,\n    type Memory,\n    ModelClass,\n    type State,\n    composeContext,\n    generateObject,\n} from \"@elizaos/core\";\nimport { ClobClient, OrderType, Side, AssetType } from \"@polymarket/clob-client\";\nimport { Wallet } from \"@ethersproject/wallet\";\nimport { getPolymarketClient, getAuthenticatedPolymarketClient } from \"./provider\";\nimport { z } from \"zod\";\n\n// Type definitions for API responses\ninterface PolymarketMarket {\n    condition_id?: string;\n    conditionId?: string;\n    id?: string;\n    question_id?: string;\n    questionId?: string;\n    question?: string;\n    title?: string;\n    name?: string;\n    description?: string;\n    market_slug?: string;\n    slug?: string;\n    active?: boolean;\n    closed?: boolean;\n    archived?: boolean;\n    accepting_orders?: boolean;\n    end_date_iso?: string;\n    endDate?: string;\n    created_date?: string;\n    createdAt?: string;\n    minimum_order_size?: string;\n    minOrderSize?: string;\n    minimum_tick_size?: string;\n    tickSize?: string;\n    icon?: string;\n    image?: string;\n    volume?: string;\n    volume24hr?: string;\n    totalVolume?: string;\n    liquidity?: string;\n    neg_risk?: boolean;\n    is_50_50_outcome?: boolean;\n    tags?: string[];\n    tokens?: PolymarketToken[];\n    outcomes?: PolymarketToken[];\n    rewards?: {\n        min_size?: string;\n        max_spread?: string;\n        rates?: any[];\n        daily_rate?: string;\n    };\n}\n\ninterface PolymarketToken {\n    token_id?: string;\n    tokenId?: string;\n    id?: string;\n    outcome?: string;\n    name?: string;\n    title?: string;\n    price?: string;\n    lastPrice?: string;\n    winner?: boolean;\n    volume?: string;\n}\n\ninterface PolymarketApiResponse {\n    data?: PolymarketMarket[];\n    markets?: PolymarketMarket[];\n}\n\n// Schema definitions for action parameters\nconst PlaceBetSchema = z.object({\n    tokenId: z.string().describe(\"The token ID of the market outcome\"),\n    side: z.enum([\"BUY\", \"SELL\"]).describe(\"Whether to buy or sell the outcome\"),\n    amount: z.number().positive().describe(\"Amount of USDC to bet\"),\n    price: z.number().min(0.01).max(0.99).describe(\"Price per share (0.01 to 0.99)\"),\n});\n\nconst CheckBalanceSchema = z.object({});\n\nconst GetMarketsSchema = z.object({\n    limit: z.number().optional().describe(\"Maximum number of markets to return\"),\n    active: z.boolean().optional().describe(\"Filter for active markets only\"),\n});\n\nconst GetMarketSchema = z.object({\n    conditionId: z.string().describe(\"The condition ID of the market\"),\n});\n\nconst GetMoreMarketsSchema = z.object({\n    cursor: z.string().describe(\"The cursor for pagination to get next batch of markets\"),\n    limit: z.number().optional().describe(\"Maximum number of markets to return\"),\n});\n\nconst CancelOrderSchema = z.object({\n    orderId: z.string().describe(\"The ID of the order to cancel\"),\n});\n\n// Place Bet Action - Fixed with proper signer\nexport const placeBetAction: Action = {\n    name: \"PLACE_BET\",\n    description: \"Place a bet on a Polymarket outcome\",\n    similes: [\"bet\", \"wager\", \"place order\", \"buy shares\", \"sell shares\"],\n    validate: async () => true,\n    handler: async (\n        runtime: IAgentRuntime,\n        message: Memory,\n        state: State | undefined,\n        options?: Record<string, unknown>,\n        callback?: HandlerCallback\n    ): Promise<boolean> => {\n        try {\n            const client = await getAuthenticatedPolymarketClient(runtime);\n            let currentState = state ?? (await runtime.composeState(message));\n            currentState = await runtime.updateRecentMessageState(currentState);\n\n            const parameterContext = composeContext({\n                state: currentState,\n                template: `{{recentMessages}}\n\nExtract the following information for placing a bet:\n- tokenId: The token ID of the market outcome\n- side: Whether to BUY or SELL\n- amount: Amount of USDC to bet\n- price: Price per share (between 0.01 and 0.99)\n\nRespond with a JSON object containing these parameters.`\n            });\n\n            const { object: parameters } = await generateObject({\n                runtime,\n                context: parameterContext,\n                modelClass: ModelClass.LARGE,\n                schema: PlaceBetSchema,\n            });\n\n            const typedParameters = parameters as z.infer<typeof PlaceBetSchema>;\n\n            // Check balance and allowance first\n            const balanceAllowance = await client.getBalanceAllowance({\n                asset_type: AssetType.COLLATERAL\n            });\n\n            const balance = parseFloat(balanceAllowance.balance);\n            const allowance = parseFloat(balanceAllowance.allowance);\n            const requiredAmount = typedParameters.amount;\n\n            if (balance < requiredAmount) {\n                const errorMsg = `Insufficient USDC balance. You have ${balance} USDC but need ${requiredAmount} USDC for this bet.`;\n                callback?.({ \n                    text: errorMsg,\n                    content: { error: errorMsg, balance, required: requiredAmount }\n                });\n                return false;\n            }\n\n            // Note: Allowance update may need to be handled differently based on the actual API\n            if (allowance < requiredAmount) {\n                console.log(\"Allowance may need to be updated. Please check the Polymarket documentation for the correct method.\");\n                // For now, we'll proceed and let the order fail if allowance is insufficient\n            }\n\n            // Calculate order size based on amount and price\n            const orderSize = typedParameters.amount / typedParameters.price;\n\n            try {\n                // Place the order using the authenticated client\n                console.log(\"Placing order...\");\n                // Note: The actual method name and parameters may vary based on the ClobClient version\n                // This is a placeholder - you'll need to check the actual API documentation\n                const orderResponse = await client.createOrder({\n                    tokenID: typedParameters.tokenId,\n                    price: typedParameters.price,\n                    side: typedParameters.side === \"BUY\" ? Side.BUY : Side.SELL,\n                    size: orderSize,\n                    feeRateBps: 0,\n                });\n\n                console.log(\"Order placed successfully:\", orderResponse);\n\n                const responseContext = composeContext({\n                    state: currentState,\n                    template: `{{recentMessages}}\n\nA bet was placed successfully on Polymarket:\n- Side: ${typedParameters.side}\n- Amount: ${typedParameters.amount} USDC\n- Price: ${typedParameters.price} per share\n- Shares: ${orderSize}\n- Order Response: ${JSON.stringify(orderResponse)}\n\nGenerate a natural response confirming the bet placement.`\n                });\n\n                const response = await generateText({\n                    runtime,\n                    context: responseContext,\n                    modelClass: ModelClass.LARGE,\n                });\n\n                callback?.({ \n                    text: response,\n                    content: {\n                        success: true,\n                        order: orderResponse,\n                        parameters: typedParameters,\n                        orderSize\n                    }\n                });\n                return true;\n\n            } catch (orderError) {\n                const errorMsg = `Failed to place order: ${orderError instanceof Error ? orderError.message : String(orderError)}`;\n                console.error(\"Order placement error:\", errorMsg);\n                callback?.({\n                    text: `Error placing bet: ${errorMsg}`,\n                    content: { error: errorMsg },\n                });\n                return false;\n            }\n\n        } catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            callback?.({\n                text: `Error placing bet: ${errorMessage}`,\n                content: { error: errorMessage },\n            });\n            return false;\n        }\n    },\n    examples: [\n        [\n            {\n                user: \"{{user1}}\",\n                content: {\n                    text: \"I want to bet $10 on Trump winning at 65 cents per share\",\n                },\n            },\n            {\n                user: \"{{agentName}}\",\n                content: {\n                    text: \"I'll place a $10 bet on Trump winning at $0.65 per share. This will buy approximately 15.38 shares.\",\n                    action: \"PLACE_BET\",\n                },\n            },\n        ],\n    ],\n};\n\n// Check Balance Action - Enhanced with detailed balance checking\nexport const checkBalanceAction: Action = {\n    name: \"CHECK_BALANCE\",\n    description: \"Check USDC balance and allowance on Polymarket with detailed analysis\",\n    similes: [\"balance\", \"funds\", \"money\", \"usdc\", \"check wallet\", \"wallet balance\", \"check funds\"],\n    validate: async () => true,\n    handler: async (\n        runtime: IAgentRuntime,\n        message: Memory,\n        state: State | undefined,\n        options?: Record<string, unknown>,\n        callback?: HandlerCallback\n    ): Promise<boolean> => {\n        try {\n            let client;\n            let isAuthenticated = false;\n            let balanceCheckSuccess = false;\n            let usdcBalanceAllowance = null;\n            \n            // Get wallet address from runtime settings\n            const funderAddress = runtime.getSetting(\"FUNDER_ADDRESS\") || '0x993f563E24efee863BbD0E54FD5Ca3d010202c39';\n            const timestamp = new Date().toISOString();\n\n            console.log(\"=== Detailed Balance Check ===\");\n            console.log(\"Address:\", funderAddress);\n            console.log(\"Network: Polygon (Chain ID: 137)\");\n            console.log(\"Timestamp:\", timestamp);\n\n            // Try to get authenticated client first (if private key is available)\n            try {\n                client = await getAuthenticatedPolymarketClient(runtime);\n                isAuthenticated = true;\n                console.log(\" Using authenticated Polymarket client\");\n                \n                // Check USDC balance and allowance\n                console.log(\"\\n1. Checking USDC (Collateral) balance and allowance...\");\n                try {\n                    usdcBalanceAllowance = await client.getBalanceAllowance({\n                        asset_type: AssetType.COLLATERAL\n                    });\n                    balanceCheckSuccess = true;\n                    console.log(\" Balance check successful with authenticated client\");\n                } catch (balanceError) {\n                    console.log(\" Balance check failed:\", balanceError);\n                    throw balanceError;\n                }\n            } catch (authError) {\n                console.log(\" Authentication not available, checking what's possible...\");\n                \n                // Try basic client for market data\n                try {\n                    client = await getPolymarketClient();\n                    console.log(\" Using basic Polymarket client (read-only mode)\");\n                    \n                    // Test market connection to show the client is working\n                    console.log(\"\\n1. Testing market connection...\");\n                    const markets = await client.getMarkets();\n                    console.log(\" Market connection successful\");\n                    \n                    // Provide helpful guidance about authentication\n                    const responseContext = composeContext({\n                        state: state ?? (await runtime.composeState(message)),\n                        template: `{{recentMessages}}\n\n=== Polymarket Balance Check (Read-Only Mode) ===\nAddress: ${funderAddress}\nNetwork: Polygon (Chain ID: 137)\nTimestamp: ${timestamp}\nStatus:  Read-only mode (no private key available)\n\n What I can tell you:\n Market connection is working\n Polymarket API is accessible\n Cannot check balance (requires wallet authentication)\n\n To enable balance checking, you need to provide a private key:\n\nOption 1: Environment Variables\nSet one of these in your environment:\n- PK=your_private_key_here\n- PRIVATE_KEY=your_private_key_here  \n- WALLET_PRIVATE_KEY=your_private_key_here\n\nOption 2: Character Secrets\nAdd to your character's secrets:\n{\n  \"WALLET_PRIVATE_KEY\": \"your_private_key_here\"\n}\n\nOption 3: Manual Balance Check\nYou can check your balance manually:\n1. Visit: https://polygonscan.com/address/${funderAddress}\n2. Look for USDC token balance\n3. Expected USDC contract: 0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174\n\n Security Note: Never share your private key or commit it to version control.\n\nGenerate a helpful response explaining the situation and providing clear next steps.`\n                    });\n\n                    const response = await generateText({\n                        runtime,\n                        context: responseContext,\n                        modelClass: ModelClass.LARGE,\n                    });\n\n                    callback?.({ \n                        text: response,\n                        content: {\n                            address: funderAddress,\n                            network: \"Polygon (Chain ID: 137)\",\n                            timestamp: timestamp,\n                            authentication: \"read-only\",\n                            status: {\n                                marketConnection: \"\",\n                                balanceCheck: \" (requires authentication)\"\n                            },\n                            guidance: {\n                                manualCheckUrl: `https://polygonscan.com/address/${funderAddress}`,\n                                usdcContract: \"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174\",\n                                setupInstructions: [\n                                    \"Set PK, PRIVATE_KEY, or WALLET_PRIVATE_KEY environment variable\",\n                                    \"Or add WALLET_PRIVATE_KEY to character secrets\"\n                                ]\n                            }\n                        }\n                    });\n                    return true;\n                } catch (clientError) {\n                    console.log(\" Even basic client failed:\", clientError);\n                    throw new Error(`Polymarket connection failed: ${clientError instanceof Error ? clientError.message : String(clientError)}`);\n                }\n            }\n\n            // If we get here, we have balance data\n            const usdcBalance = parseFloat(usdcBalanceAllowance.balance);\n            const usdcAllowance = parseFloat(usdcBalanceAllowance.allowance || \"0\");\n\n            console.log(\"USDC Balance:\", usdcBalanceAllowance.balance);\n            console.log(\"USDC Allowance:\", usdcBalanceAllowance.allowance);\n            console.log(\"Parsed USDC Balance (number):\", usdcBalance);\n            console.log(\"Parsed USDC Allowance (number):\", usdcAllowance);\n\n            // Analyze balance status\n            let balanceStatus = \"\";\n            let balanceAnalysis = \"\";\n            let recommendations = [];\n\n            if (usdcBalance === 0) {\n                balanceStatus = \"\";\n                balanceAnalysis = \"Zero USDC balance detected!\";\n                recommendations = [\n                    \"1. USDC transaction is still pending (check PolygonScan)\",\n                    \"2. USDC was sent to wrong network (should be Polygon, not Ethereum)\",\n                    \"3. USDC was sent to wrong address\",\n                    \"4. USDC amount was too small (minimum might be required)\"\n                ];\n            } else {\n                balanceAnalysis = `USDC balance found: $${usdcBalance.toFixed(2)}`;\n                \n                if (usdcAllowance < usdcBalance) {\n                    balanceAnalysis += \" - Allowance is less than balance\";\n                    recommendations.push(\"Allowance may need to be updated for trading\");\n                } else {\n                    balanceAnalysis += \" - Allowance is sufficient\";\n                }\n            }\n\n            // Test market connection\n            console.log(\"\\n2. Testing market connection...\");\n            let marketConnectionStatus = \"\";\n            let marketConnectionInfo = \"\";\n            \n            try {\n                const markets = await client.getMarkets();\n                marketConnectionStatus = \"\";\n                marketConnectionInfo = \"Market connection successful\";\n                console.log(\" Market connection successful\");\n            } catch (marketErr) {\n                marketConnectionInfo = `Market connection failed: ${marketErr instanceof Error ? marketErr.message : String(marketErr)}`;\n                console.log(\" Market connection failed:\", marketErr);\n            }\n\n            // Create detailed response context\n            const responseContext = composeContext({\n                state: state ?? (await runtime.composeState(message)),\n                template: `{{recentMessages}}\n\n=== Detailed Polymarket Balance Check ===\nAddress: ${funderAddress}\nNetwork: Polygon (Chain ID: 137)\nTimestamp: ${timestamp}\nAuthentication: ${isAuthenticated ? \" Authenticated\" : \" Read-only\"}\n\n1. USDC Balance Analysis:\n${balanceStatus} ${balanceAnalysis}\n- Raw Balance: ${usdcBalanceAllowance.balance}\n- Raw Allowance: ${usdcBalanceAllowance.allowance}\n- Parsed Balance: $${usdcBalance.toFixed(2)}\n- Parsed Allowance: $${usdcAllowance.toFixed(2)}\n\n2. Market Connection:\n${marketConnectionStatus} ${marketConnectionInfo}\n\n${recommendations.length > 0 ? `3. Recommendations:\n${recommendations.map(rec => `- ${rec}`).join('\\n')}` : ''}\n\n${usdcBalance === 0 ? `4. Troubleshooting:\n- Check PolygonScan: https://polygonscan.com/address/${funderAddress}\n- Look for USDC transactions to this address\n- Make sure the transaction shows 'Success' status\n- Wait a few minutes and try again\n- Expected USDC contract on Polygon: 0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174` : ''}\n\nGenerate a natural response summarizing the balance check results, highlighting any issues and providing helpful guidance.`\n            });\n\n            const response = await generateText({\n                runtime,\n                context: responseContext,\n                modelClass: ModelClass.LARGE,\n            });\n\n            callback?.({ \n                text: response,\n                content: {\n                    address: funderAddress,\n                    network: \"Polygon (Chain ID: 137)\",\n                    timestamp: timestamp,\n                    authentication: isAuthenticated ? \"authenticated\" : \"read-only\",\n                    balance: {\n                        raw: usdcBalanceAllowance.balance,\n                        parsed: usdcBalance,\n                        allowance: {\n                            raw: usdcBalanceAllowance.allowance,\n                            parsed: usdcAllowance\n                        }\n                    },\n                    status: {\n                        balance: balanceStatus,\n                        marketConnection: marketConnectionStatus\n                    },\n                    analysis: balanceAnalysis,\n                    marketConnectionInfo: marketConnectionInfo,\n                    recommendations: recommendations,\n                    troubleshooting: usdcBalance === 0 ? {\n                        polygonScanUrl: `https://polygonscan.com/address/${funderAddress}`,\n                        usdcContract: \"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174\"\n                    } : null\n                }\n            });\n            return true;\n        } catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            console.error(\" Error checking balance:\", error);\n            callback?.({\n                text: `Error checking balance: ${errorMessage}`,\n                content: { \n                    error: errorMessage,\n                    timestamp: new Date().toISOString()\n                },\n            });\n            return false;\n        }\n    },\n    examples: [\n        [\n            {\n                user: \"{{user1}}\",\n                content: {\n                    text: \"What's my balance?\",\n                },\n            },\n            {\n                user: \"{{agentName}}\",\n                content: {\n                    text: \"Let me check your detailed Polymarket balance...\",\n                    action: \"CHECK_BALANCE\",\n                },\n            },\n        ],\n        [\n            {\n                user: \"{{user1}}\",\n                content: {\n                    text: \"Check my wallet funds\",\n                },\n            },\n            {\n                user: \"{{agentName}}\",\n                content: {\n                    text: \"I'll perform a comprehensive balance check on your Polymarket wallet...\",\n                    action: \"CHECK_BALANCE\",\n                },\n            },\n        ],\n    ],\n};\n\n// Get Latest Markets Action - Updated to use CLOB API for fresh active markets\nexport const getMarketsAction: Action = {\n    name: \"GET_MARKETS\",\n    description: \"Get latest active markets from Polymarket using CLOB API\",\n    similes: [\"markets\", \"betting markets\", \"available bets\", \"what can I bet on\", \"latest markets\", \"newest markets\", \"fresh markets\", \"current markets\", \"active markets\"],\n    validate: async () => true,\n    handler: async (\n        runtime: IAgentRuntime,\n        message: Memory,\n        state: State | undefined,\n        options?: Record<string, unknown>,\n        callback?: HandlerCallback\n    ): Promise<boolean> => {\n        try {\n            let currentState = state ?? (await runtime.composeState(message));\n\n            const parameterContext = composeContext({\n                state: currentState,\n                template: `{{recentMessages}}\n\nExtract parameters for getting the latest markets:\n- limit: Maximum number of markets to return (optional, default 10, max 20)\n- active: Filter for active markets only (optional, default true)\n\nRespond with a JSON object.`\n            });\n\n            const { object: parameters } = await generateObject({\n                runtime,\n                context: parameterContext,\n                modelClass: ModelClass.LARGE,\n                schema: GetMarketsSchema,\n            });\n\n            const typedParameters = parameters as z.infer<typeof GetMarketsSchema>;\n            const limit = Math.min(typedParameters.limit || 10, 20);\n            const activeOnly = typedParameters.active !== false; // Default to true\n            \n            // Temporary debug option - set to true to disable filtering and show all markets\n            const debugShowAll = process.env.DEBUG_SHOW_ALL_MARKETS === 'true';\n\n            console.log(`Fetching ${limit} latest markets, active only: ${activeOnly}, debug show all: ${debugShowAll}`);\n\n            try {\n                // Use CLOB API to get markets\n                const client = await getPolymarketClient();\n                const marketsResponse = await client.getMarkets();\n                \n                let markets: any[] = [];\n                if (Array.isArray(marketsResponse)) {\n                    markets = marketsResponse;\n                } else if (marketsResponse && typeof marketsResponse === 'object') {\n                    const response = marketsResponse as any;\n                    if (response.data && Array.isArray(response.data)) {\n                        markets = response.data;\n                    }\n                }\n\n                if (!Array.isArray(markets)) {\n                    console.log(\"Unexpected response format:\", marketsResponse);\n                    markets = [];\n                }\n\n                console.log(`Found ${markets.length} total markets from CLOB API`);\n\n                // Debug: Log market data structure\n                if (markets.length > 0) {\n                    const sampleMarket = markets[0];\n                    console.log(\"Sample market structure:\", {\n                        question: sampleMarket.question || sampleMarket.title || 'No title',\n                        active: sampleMarket.active,\n                        closed: sampleMarket.closed,\n                        archived: sampleMarket.archived,\n                        accepting_orders: sampleMarket.accepting_orders,\n                        end_date: sampleMarket.end_date_iso || sampleMarket.endDate,\n                        has_tokens: sampleMarket.tokens && Array.isArray(sampleMarket.tokens),\n                        tokens_count: sampleMarket.tokens ? sampleMarket.tokens.length : 0\n                    });\n                }\n\n                if (markets.length === 0) {\n                    callback?.({\n                        text: \"No markets found at this time. The Polymarket CLOB API may be experiencing issues.\",\n                        content: { markets: [], totalCount: 0 }\n                    });\n                    return true;\n                }\n\n                // Enhanced filtering for active markets\n                let filteredMarkets = markets;\n                if (activeOnly && !debugShowAll) {\n                    console.log(`Starting with ${markets.length} total markets`);\n                    \n                    // Debug: Show sample market data\n                    if (markets.length > 0) {\n                        console.log(\"Sample market data structure:\", {\n                            question: markets[0].question || markets[0].title,\n                            active: markets[0].active,\n                            closed: markets[0].closed,\n                            archived: markets[0].archived,\n                            accepting_orders: markets[0].accepting_orders,\n                            end_date: markets[0].end_date_iso || markets[0].endDate\n                        });\n                    }\n                    \n                    // Very lenient filtering - only filter out obviously closed/archived markets\n                    filteredMarkets = markets.filter((market: any) => {\n                        // Only filter out explicitly closed or archived markets\n                        const isNotClosed = market.closed !== true;\n                        const isNotArchived = market.archived !== true;\n                        \n                        // Log what we're filtering out\n                        if (!isNotClosed) console.log(`Filtered out: ${market.question || market.title} - explicitly closed`);\n                        if (!isNotArchived) console.log(`Filtered out: ${market.question || market.title} - explicitly archived`);\n                        \n                        return isNotClosed && isNotArchived;\n                    });\n                    \n                    console.log(`After lenient filtering: ${filteredMarkets.length} markets remain`);\n                    \n                    // If we filtered out too many, show all markets with a warning\n                    if (filteredMarkets.length === 0 && markets.length > 0) {\n                        console.log(\"Warning: All markets were filtered out. Showing all markets with status indicators.\");\n                        filteredMarkets = markets;\n                    }\n                } else if (debugShowAll) {\n                    console.log(\"DEBUG: Showing all markets without filtering\");\n                    filteredMarkets = markets;\n                }\n\n                if (filteredMarkets.length === 0) {\n                    // If no markets after filtering, try showing all markets with a warning\n                    if (markets.length > 0) {\n                        console.log(\"Warning: All markets were filtered out. Showing all markets with status indicators.\");\n                        filteredMarkets = markets;\n                    } else {\n                        callback?.({\n                            text: \"No markets found at this time. The Polymarket CLOB API may be experiencing issues.\",\n                            content: { markets: [], totalCount: 0 }\n                        });\n                        return true;\n                    }\n                }\n\n                // Sort markets by activity and volume for better presentation\n                filteredMarkets.sort((a: any, b: any) => {\n                    // First priority: accepting orders\n                    const aAccepting = a.accepting_orders !== false;\n                    const bAccepting = b.accepting_orders !== false;\n                    if (aAccepting !== bAccepting) {\n                        return aAccepting ? -1 : 1;\n                    }\n                    \n                    // Second priority: 24h volume (higher volume first)\n                    const aVolume = parseFloat(a.volume24hr || a.volume || '0');\n                    const bVolume = parseFloat(b.volume24hr || b.volume || '0');\n                    if (aVolume !== bVolume) {\n                        return bVolume - aVolume;\n                    }\n                    \n                    // Third priority: end date (sooner ending first for urgency)\n                    const aEndDate = a.end_date_iso || a.endDate;\n                    const bEndDate = b.end_date_iso || b.endDate;\n                    if (aEndDate && bEndDate) {\n                        const aEnd = new Date(aEndDate);\n                        const bEnd = new Date(bEndDate);\n                        return aEnd.getTime() - bEnd.getTime();\n                    }\n                    \n                    // Fourth priority: creation date (newer first)\n                    const aCreated = a.created_date || a.createdAt;\n                    const bCreated = b.created_date || b.createdAt;\n                    if (aCreated && bCreated) {\n                        const aCreate = new Date(aCreated);\n                        const bCreate = new Date(bCreated);\n                        return bCreate.getTime() - aCreate.getTime();\n                    }\n                    \n                    return 0;\n                });\n\n                // Process markets with comprehensive data\n                const processedMarkets = filteredMarkets.slice(0, limit).map((market: any, index: number) => {\n                    const tokens = market.tokens || market.outcomes || [];\n                    const tokenArray = Array.isArray(tokens) ? tokens : [];\n                    \n                    // Calculate freshness indicator and time remaining\n                    const endDate = new Date(market.end_date_iso || market.endDate || '2099-12-31');\n                    const now = new Date();\n                    const daysUntilEnd = Math.ceil((endDate.getTime() - now.getTime()) / (1000 * 60 * 60 * 24));\n                    const freshness = daysUntilEnd > 0 ? daysUntilEnd : 0;\n                    \n                    // Calculate market activity score\n                    const volume24hr = parseFloat(market.volume24hr || market.volume || '0');\n                    const liquidity = parseFloat(market.liquidity || '0');\n                    const activityScore = volume24hr + (liquidity * 0.1); // Weight volume more heavily\n                    \n                    return {\n                        condition_id: market.condition_id || market.conditionId || market.id,\n                        question_id: market.question_id || market.questionId,\n                        question: market.question || market.title || market.name || 'Unknown Market',\n                        description: market.description ? \n                            (market.description.length > 200 ? \n                                market.description.substring(0, 200) + '...' : \n                                market.description) : \n                            'No description available',\n                        market_slug: market.market_slug || market.slug,\n                        active: market.active,\n                        closed: market.closed,\n                        archived: market.archived,\n                        accepting_orders: market.accepting_orders,\n                        end_date_iso: market.end_date_iso || market.endDate,\n                        created_date: market.created_date || market.createdAt,\n                        minimum_order_size: market.minimum_order_size || market.minOrderSize || '1.00',\n                        minimum_tick_size: market.minimum_tick_size || market.tickSize || '0.01',\n                        icon: market.icon,\n                        image: market.image,\n                        volume: market.volume || market.volume24hr || market.totalVolume,\n                        volume24hr: market.volume24hr,\n                        liquidity: market.liquidity,\n                        neg_risk: market.neg_risk,\n                        is_50_50_outcome: market.is_50_50_outcome,\n                        tags: Array.isArray(market.tags) ? market.tags.slice(0, 5) : [],\n                        freshness_days: freshness,\n                        activity_score: activityScore,\n                        tokens: tokenArray.map((token: any) => ({\n                            token_id: token.token_id || token.tokenId || token.id,\n                            outcome: token.outcome || token.name || token.title,\n                            price: token.price || token.lastPrice || '0.50',\n                            winner: token.winner,\n                            volume: token.volume\n                        })),\n                        rewards: market.rewards ? {\n                            min_size: market.rewards.min_size,\n                            max_spread: market.rewards.max_spread,\n                            rates_count: market.rewards.rates?.length || 0,\n                            daily_rate: market.rewards.daily_rate\n                        } : null,\n                        last_updated: new Date().toISOString()\n                    };\n                });\n\n                // Create enhanced market summary with activity indicators\n                const marketSummary = processedMarkets.map((market: any, index: number) => {\n                    const outcomes = market.tokens.length > 0 ? \n                        market.tokens.map((t: any) => `${t.outcome} ($${t.price})`).join(' vs ') :\n                        'No outcomes available';\n                    \n                    // Enhanced status indicators\n                    const statusEmoji = market.accepting_orders ? \"\" : \n                        (market.active ? \"\" : \n                        (market.closed ? \"\" : \"\"));\n                    \n                    const activityEmoji = market.activity_score > 10000 ? \"\" : \n                        (market.activity_score > 1000 ? \"\" : \n                        (market.activity_score > 100 ? \"\" : \"\"));\n                    \n                    const urgencyEmoji = market.freshness_days <= 1 ? \"\" : \n                        (market.freshness_days <= 7 ? \"\" : \n                        (market.freshness_days <= 30 ? \"\" : \"\"));\n                    \n                    const tags = market.tags.length > 0 ? market.tags.slice(0, 3).join(', ') : 'No tags';\n                    const endDate = market.end_date_iso ? new Date(market.end_date_iso).toLocaleDateString() : 'No end date';\n                    const volume24hr = market.volume24hr ? `$${parseFloat(market.volume24hr).toLocaleString()}` : 'N/A';\n                    const liquidity = market.liquidity ? `$${parseFloat(market.liquidity).toLocaleString()}` : 'N/A';\n                    \n                    return `${index + 1}. ${statusEmoji}${activityEmoji}${urgencyEmoji} ${market.question.substring(0, 70)}${market.question.length > 70 ? '...' : ''}\n    Outcomes: ${outcomes}\n    24h Volume: ${volume24hr} |  Liquidity: ${liquidity} |  Tags: ${tags}\n    Min Order: $${market.minimum_order_size} |  Ends: ${endDate}\n    Condition ID: ${market.condition_id || 'N/A'}\n     Days remaining: ${market.freshness_days} |  Activity Score: ${market.activity_score.toFixed(0)}`;\n                }).join('\\n\\n');\n\n                const responseContext = composeContext({\n                    state: currentState,\n                    template: `{{recentMessages}}\n\nFound ${processedMarkets.length} current active betting markets on Polymarket (using CLOB API):\n\nLegend: \n Accepting Orders |  Active |  Closed |  Unknown\n High Activity (10k+) |  Medium Activity (1k+) |  Low Activity (100+) |  New\n Ending Today |  Ending This Week |  Ending This Month |  Long Term\n\n${marketSummary}\n\nThese are the most current and active markets available for betting right now, sorted by activity level and urgency.\n\nGenerate a response highlighting these current active markets with their key details, emphasizing which ones are most active, have high volume, and are ending soon.`\n                });\n\n                const responseText = await generateText({\n                    runtime,\n                    context: responseContext,\n                    modelClass: ModelClass.LARGE,\n                });\n\n                callback?.({ \n                    text: responseText,\n                    content: { \n                        markets: processedMarkets,\n                        totalCount: markets.length,\n                        displayedCount: processedMarkets.length,\n                        activeCount: processedMarkets.filter(m => m.active).length,\n                        acceptingOrdersCount: processedMarkets.filter(m => m.accepting_orders).length,\n                        timestamp: new Date().toISOString(),\n                        source: \"CLOB-API\",\n                        sorting: \"activity_and_urgency\",\n                        filters_applied: activeOnly ? [\"active_only\", \"accepting_orders\", \"not_expired\", \"has_outcomes\"] : [],\n                        activity_stats: {\n                            high_activity: processedMarkets.filter(m => m.activity_score > 10000).length,\n                            medium_activity: processedMarkets.filter(m => m.activity_score > 1000 && m.activity_score <= 10000).length,\n                            low_activity: processedMarkets.filter(m => m.activity_score <= 1000).length,\n                            ending_soon: processedMarkets.filter(m => m.freshness_days <= 7).length\n                        }\n                    }\n                });\n                return true;\n                \n            } catch (apiError) {\n                console.error(\"CLOB API failed:\", apiError);\n                throw new Error(`Failed to fetch current active markets from CLOB API: ${apiError instanceof Error ? apiError.message : String(apiError)}`);\n            }\n            \n        } catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            console.error(\"Get current active markets error:\", errorMessage);\n            callback?.({\n                text: `Error getting current active markets: ${errorMessage}. Please check your internet connection and try again.`,\n                content: { error: errorMessage },\n            });\n            return false;\n        }\n    },\n    examples: [\n        [\n            {\n                user: \"{{user1}}\",\n                content: {\n                    text: \"What are the current active betting markets?\",\n                },\n            },\n            {\n                user: \"{{agentName}}\",\n                content: {\n                    text: \"Here are the current active betting markets on Polymarket, sorted by activity level and urgency...\",\n                    action: \"GET_MARKETS\",\n                },\n            },\n        ],\n        [\n            {\n                user: \"{{user1}}\",\n                content: {\n                    text: \"Show me the latest active markets on Polymarket\",\n                },\n            },\n            {\n                user: \"{{agentName}}\",\n                content: {\n                    text: \"I'll fetch the latest and most current active markets for you, sorted by activity and urgency...\",\n                    action: \"GET_MARKETS\",\n                },\n            },\n        ],\n    ],\n};\n\n// Get More Markets Action - Updated to use CLOB API\nexport const getMoreMarketsAction: Action = {\n    name: \"GET_MORE_MARKETS\",\n    description: \"Get next batch of markets using CLOB API\",\n    similes: [\"more markets\", \"next page\", \"continue\", \"see more\"],\n    validate: async () => true,\n    handler: async (\n        runtime: IAgentRuntime,\n        message: Memory,\n        state: State | undefined,\n        options?: Record<string, unknown>,\n        callback?: HandlerCallback\n    ): Promise<boolean> => {\n        try {\n            let currentState = state ?? (await runtime.composeState(message));\n\n            const parameterContext = composeContext({\n                state: currentState,\n                template: `{{recentMessages}}\n\nExtract parameters for getting more markets:\n- cursor: The cursor for pagination (optional)\n- limit: Maximum number of markets to return (optional, default 10)\n\nRespond with a JSON object.`\n            });\n\n            const { object: parameters } = await generateObject({\n                runtime,\n                context: parameterContext,\n                modelClass: ModelClass.LARGE,\n                schema: GetMoreMarketsSchema,\n            });\n\n            const typedParameters = parameters as z.infer<typeof GetMoreMarketsSchema>;\n            const limit = Math.min(typedParameters.limit || 10, 20);\n            \n            try {\n                // Use CLOB API to get markets\n                const client = await getPolymarketClient();\n                const marketsResponse = await client.getMarkets();\n                \n                let markets: any[] = [];\n                if (Array.isArray(marketsResponse)) {\n                    markets = marketsResponse;\n                } else if (marketsResponse && typeof marketsResponse === 'object') {\n                    const response = marketsResponse as any;\n                    if (response.data && Array.isArray(response.data)) {\n                        markets = response.data;\n                    }\n                }\n\n                if (!Array.isArray(markets)) {\n                    markets = [];\n                }\n\n                if (markets.length === 0) {\n                    callback?.({\n                        text: \"No additional markets available at this time.\",\n                        content: { endOfResults: true }\n                    });\n                    return true;\n                }\n\n                // Apply enhanced filtering for active markets (same logic as getMarketsAction)\n                let filteredMarkets = markets.filter((market: any) => {\n                    // Check if market is active and accepting orders\n                    const isActive = market.active !== false;\n                    const isAcceptingOrders = market.accepting_orders !== false;\n                    const isNotClosed = market.closed !== true;\n                    const isNotArchived = market.archived !== true;\n                    \n                    // Check if market has a valid end date that hasn't passed\n                    const hasValidEndDate = market.end_date_iso || market.endDate;\n                    let isNotExpired = true;\n                    if (hasValidEndDate) {\n                        const endDate = new Date(hasValidEndDate);\n                        const now = new Date();\n                        isNotExpired = endDate > now;\n                    }\n                    \n                    // Check if market has valid tokens/outcomes\n                    const hasValidTokens = market.tokens && Array.isArray(market.tokens) && market.tokens.length > 0;\n                    const hasValidOutcomes = market.outcomes && Array.isArray(market.outcomes) && market.outcomes.length > 0;\n                    const hasOutcomes = hasValidTokens || hasValidOutcomes;\n                    \n                    return isActive && isAcceptingOrders && isNotClosed && isNotArchived && isNotExpired && hasOutcomes;\n                });\n\n                // Sort markets by activity and volume (same logic as getMarketsAction)\n                filteredMarkets.sort((a: any, b: any) => {\n                    // First priority: accepting orders\n                    const aAccepting = a.accepting_orders !== false;\n                    const bAccepting = b.accepting_orders !== false;\n                    if (aAccepting !== bAccepting) {\n                        return aAccepting ? -1 : 1;\n                    }\n                    \n                    // Second priority: 24h volume (higher volume first)\n                    const aVolume = parseFloat(a.volume24hr || a.volume || '0');\n                    const bVolume = parseFloat(b.volume24hr || b.volume || '0');\n                    if (aVolume !== bVolume) {\n                        return bVolume - aVolume;\n                    }\n                    \n                    // Third priority: end date (sooner ending first for urgency)\n                    const aEndDate = a.end_date_iso || a.endDate;\n                    const bEndDate = b.end_date_iso || b.endDate;\n                    if (aEndDate && bEndDate) {\n                        const aEnd = new Date(aEndDate);\n                        const bEnd = new Date(bEndDate);\n                        return aEnd.getTime() - bEnd.getTime();\n                    }\n                    \n                    // Fourth priority: creation date (newer first)\n                    const aCreated = a.created_date || a.createdAt;\n                    const bCreated = b.created_date || b.createdAt;\n                    if (aCreated && bCreated) {\n                        const aCreate = new Date(aCreated);\n                        const bCreate = new Date(bCreated);\n                        return bCreate.getTime() - aCreate.getTime();\n                    }\n                    \n                    return 0;\n                });\n\n                // Process markets\n                const processedMarkets = filteredMarkets.slice(0, limit).map((market: any) => {\n                    const tokens = market.tokens || market.outcomes || [];\n                    const tokenArray = Array.isArray(tokens) ? tokens : [];\n                    \n                    // Calculate activity score\n                    const volume24hr = parseFloat(market.volume24hr || market.volume || '0');\n                    const liquidity = parseFloat(market.liquidity || '0');\n                    const activityScore = volume24hr + (liquidity * 0.1);\n                    \n                    // Calculate freshness\n                    const endDate = new Date(market.end_date_iso || market.endDate || '2099-12-31');\n                    const now = new Date();\n                    const daysUntilEnd = Math.ceil((endDate.getTime() - now.getTime()) / (1000 * 60 * 60 * 24));\n                    const freshness = daysUntilEnd > 0 ? daysUntilEnd : 0;\n                    \n                    return {\n                        condition_id: market.condition_id || market.conditionId || market.id,\n                        question: market.question || market.title || 'Unknown Market',\n                        description: market.description ? \n                            (market.description.length > 150 ? \n                                market.description.substring(0, 150) + '...' : \n                                market.description) : \n                            'No description',\n                        active: market.active,\n                        closed: market.closed,\n                        accepting_orders: market.accepting_orders,\n                        end_date_iso: market.end_date_iso || market.endDate,\n                        minimum_order_size: market.minimum_order_size || '1.00',\n                        volume24hr: market.volume24hr,\n                        liquidity: market.liquidity,\n                        tags: Array.isArray(market.tags) ? market.tags.slice(0, 5) : [],\n                        activity_score: activityScore,\n                        freshness_days: freshness,\n                        tokens: tokenArray.map((token: any) => ({\n                            token_id: token.token_id || token.tokenId || token.id,\n                            outcome: token.outcome || token.name,\n                            price: token.price || token.lastPrice || '0.50',\n                            winner: token.winner\n                        }))\n                    };\n                });\n\n                const marketSummary = processedMarkets.map((market: any, index: number) => {\n                    const outcomes = market.tokens.length > 0 ? \n                        market.tokens.map((t: any) => `${t.outcome} ($${t.price})`).join(' vs ') :\n                        'No outcomes available';\n                    \n                    // Enhanced status indicators\n                    const statusEmoji = market.accepting_orders ? \"\" : \n                        (market.active ? \"\" : (market.closed ? \"\" : \"\"));\n                    \n                    const activityEmoji = market.activity_score > 10000 ? \"\" : \n                        (market.activity_score > 1000 ? \"\" : \n                        (market.activity_score > 100 ? \"\" : \"\"));\n                    \n                    const urgencyEmoji = market.freshness_days <= 1 ? \"\" : \n                        (market.freshness_days <= 7 ? \"\" : \n                        (market.freshness_days <= 30 ? \"\" : \"\"));\n                    \n                    const tags = market.tags.length > 0 ? market.tags.slice(0, 3).join(', ') : 'No tags';\n                    const volume24hr = market.volume24hr ? `$${parseFloat(market.volume24hr).toLocaleString()}` : 'N/A';\n                    const liquidity = market.liquidity ? `$${parseFloat(market.liquidity).toLocaleString()}` : 'N/A';\n                    \n                    return `${index + 1}. ${statusEmoji}${activityEmoji}${urgencyEmoji} ${market.question.substring(0, 60)}${market.question.length > 60 ? '...' : ''}\n   Outcomes: ${outcomes}\n   24h Volume: ${volume24hr} | Liquidity: ${liquidity} | Tags: ${tags}\n   Min Order: $${market.minimum_order_size}\n   Ends: ${market.end_date_iso ? new Date(market.end_date_iso).toLocaleDateString() : 'No end date'}\n   Activity Score: ${market.activity_score.toFixed(0)} | Days remaining: ${market.freshness_days}`;\n                }).join('\\n\\n');\n\n                const responseContext = composeContext({\n                    state: currentState,\n                    template: `{{recentMessages}}\n\nAdditional current active markets from Polymarket (${processedMarkets.length} shown):\n\nLegend: \n Accepting Orders |  Active |  Closed |  Unknown\n High Activity |  Medium Activity |  Low Activity |  New\n Ending Today |  Ending This Week |  Ending This Month |  Long Term\n\n${marketSummary}\n\nGenerate a response showing these additional current active markets with their key details, emphasizing activity levels and urgency.`\n                });\n\n                const responseText = await generateText({\n                    runtime,\n                    context: responseContext,\n                    modelClass: ModelClass.LARGE,\n                });\n\n                callback?.({ \n                    text: responseText,\n                    content: { \n                        markets: processedMarkets,\n                        count: processedMarkets.length,\n                        hasMore: filteredMarkets.length > limit,\n                        nextCursor: (processedMarkets.length + limit).toString(),\n                        source: \"CLOB-API\",\n                        sorting: \"activity_and_urgency\",\n                        filters_applied: [\"active_only\", \"accepting_orders\", \"not_expired\", \"has_outcomes\"]\n                    }\n                });\n                return true;\n                \n            } catch (error) {\n                console.error(\"Failed to fetch more markets:\", error);\n                throw new Error(`Failed to get more current active markets: ${error instanceof Error ? error.message : String(error)}`);\n            }\n            \n        } catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            callback?.({\n                text: `Error getting more current active markets: ${errorMessage}`,\n                content: { error: errorMessage },\n            });\n            return false;\n        }\n    },\n    examples: [\n        [\n            {\n                user: \"{{user1}}\",\n                content: {\n                    text: \"Show me more current active markets\",\n                },\n            },\n            {\n                user: \"{{agentName}}\",\n                content: {\n                    text: \"Here are additional current active markets from Polymarket, sorted by activity level and urgency...\",\n                    action: \"GET_MORE_MARKETS\",\n                },\n            },\n        ],\n    ],\n};\n\n// Get Market Action - Complete implementation using CLOB API\nexport const getMarketAction: Action = {\n    name: \"GET_MARKET\",\n    description: \"Get details of a specific market on Polymarket using CLOB API\",\n    similes: [\"market details\", \"specific market\", \"market info\"],\n    validate: async () => true,\n    handler: async (\n        runtime: IAgentRuntime,\n        message: Memory,\n        state: State | undefined,\n        options?: Record<string, unknown>,\n        callback?: HandlerCallback\n    ): Promise<boolean> => {\n        try {\n            let currentState = state ?? (await runtime.composeState(message));\n\n            const parameterContext = composeContext({\n                state: currentState,\n                template: `{{recentMessages}}\n\nExtract the condition ID for the market to get details for.\n\nRespond with a JSON object containing the conditionId.`\n            });\n\n            const { object: parameters } = await generateObject({\n                runtime,\n                context: parameterContext,\n                modelClass: ModelClass.LARGE,\n                schema: GetMarketSchema,\n            });\n\n            const typedParameters = parameters as z.infer<typeof GetMarketSchema>;\n\n            try {\n                // Use CLOB API to get all markets and find the specific one\n                const client = await getPolymarketClient();\n                const marketsResponse = await client.getMarkets();\n                \n                let markets: any[] = [];\n                if (Array.isArray(marketsResponse)) {\n                    markets = marketsResponse;\n                } else if (marketsResponse && typeof marketsResponse === 'object') {\n                    const response = marketsResponse as any;\n                    if (response.data && Array.isArray(response.data)) {\n                        markets = response.data;\n                    }\n                }\n\n                // Find the specific market by condition ID\n                const market = markets.find((m: any) => \n                    m.condition_id === typedParameters.conditionId || \n                    m.conditionId === typedParameters.conditionId ||\n                    m.id === typedParameters.conditionId\n                );\n\n                if (!market) {\n                    throw new Error(`Market with condition ID ${typedParameters.conditionId} not found`);\n                }\n\n                console.log(\"Market details from CLOB API:\", market);\n\n                // Process tokens\n                const tokens = market.tokens || market.outcomes || [];\n                const tokenArray = Array.isArray(tokens) ? tokens : [];\n                \n                // Create comprehensive market summary\n                const liquidity = market.liquidity ? `$${parseFloat(market.liquidity).toLocaleString()}` : 'N/A';\n                const endDate = market.end_date_iso ? new Date(market.end_date_iso).toLocaleString() : 'N/A';\n                const volume24hr = market.volume24hr ? `$${parseFloat(market.volume24hr).toLocaleString()}` : 'N/A';\n                const tagsString = Array.isArray(market.tags) ? market.tags.slice(0, 5).join(', ') : 'No tags';\n                const rewardInfo = market.rewards ? \n                    `Rewards available: Min size $${market.rewards.min_size}, Max spread ${market.rewards.max_spread}` : \n                    'No rewards available';\n                \n                const tokenDetails = tokenArray.map((token: any, index: number) => {\n                    const price = token.price || token.lastPrice || '0.50';\n                    const outcome = token.outcome || token.name || token.title || `Outcome ${index + 1}`;\n                    const winner = token.winner ? ' (Winner)' : '';\n                    return `   ${index + 1}. ${outcome}: $${price}${winner}`;\n                }).join('\\n');\n\n                const marketDetails = `\n Market: ${market.question || market.title || 'Unknown Market'}\n Description: ${market.description || 'No description available'}\n Ends: ${endDate}\n Liquidity: ${liquidity}\n 24h Volume: ${volume24hr}\n Tags: ${tagsString}\n ${rewardInfo}\n\n Outcomes & Prices:\n${tokenDetails}\n                `;\n\n                const responseContext = composeContext({\n                    state: currentState,\n                    template: `{{recentMessages}}\n\nFetched detailed information for market condition ID: ${typedParameters.conditionId} using CLOB API\n\n${marketDetails}\n\nGenerate a natural summary of this market, highlighting the question, prices, volume, and outcomes.`\n                });\n\n                const responseText = await generateText({\n                    runtime,\n                    context: responseContext,\n                    modelClass: ModelClass.LARGE,\n                });\n\n                callback?.({\n                    text: responseText,\n                    content: {\n                        market,\n                        tokens: tokenArray,\n                        conditionId: typedParameters.conditionId,\n                        source: \"CLOB-API\"\n                    }\n                });\n\n                return true;\n\n            } catch (error) {\n                const errorMessage = error instanceof Error ? error.message : String(error);\n                console.error(\"Failed to fetch specific market:\", errorMessage);\n                callback?.({\n                    text: `Error getting market details: ${errorMessage}`,\n                    content: { error: errorMessage }\n                });\n                return false;\n            }\n        } catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            callback?.({\n                text: `Error extracting condition ID: ${errorMessage}`,\n                content: { error: errorMessage }\n            });\n            return false;\n        }\n    },\n    examples: [\n        [\n            {\n                user: \"{{user1}}\",\n                content: {\n                    text: \"Can you show me details about the market with condition ID xyz123?\",\n                },\n            },\n            {\n                user: \"{{agentName}}\",\n                content: {\n                    text: \"Here are the details for market xyz123 using the CLOB API: it's about whether Biden will win in 2024, with outcomes YES ($0.62) and NO ($0.38)...\",\n                    action: \"GET_MARKET\",\n                },\n            },\n        ],\n    ],\n};\n// Get High Activity Markets Action - New action for high-volume markets\nexport const getHighActivityMarketsAction: Action = {\n    name: \"GET_HIGH_ACTIVITY_MARKETS\",\n    description: \"Get markets with high activity levels (high volume and liquidity) from Polymarket\",\n    similes: [\"high volume markets\", \"busy markets\", \"popular markets\", \"trending markets\", \"hot markets\", \"active trading\"],\n    validate: async () => true,\n    handler: async (\n        runtime: IAgentRuntime,\n        message: Memory,\n        state: State | undefined,\n        options?: Record<string, unknown>,\n        callback?: HandlerCallback\n    ): Promise<boolean> => {\n        try {\n            let currentState = state ?? (await runtime.composeState(message));\n\n            const parameterContext = composeContext({\n                state: currentState,\n                template: `{{recentMessages}}\n\nExtract parameters for getting high activity markets:\n- limit: Maximum number of markets to return (optional, default 10, max 20)\n- minVolume: Minimum 24h volume threshold in USD (optional, default 1000)\n\nRespond with a JSON object.`\n            });\n\n            const { object: parameters } = await generateObject({\n                runtime,\n                context: parameterContext,\n                modelClass: ModelClass.LARGE,\n                schema: GetMarketsSchema,\n            });\n\n            const typedParameters = parameters as z.infer<typeof GetMarketsSchema>;\n            const limit = Math.min(typedParameters.limit || 10, 20);\n            const minVolume = 1000; // Default minimum volume threshold\n\n            console.log(`Fetching ${limit} high activity markets with minimum volume of $${minVolume}`);\n\n            try {\n                // Use CLOB API to get markets\n                const client = await getPolymarketClient();\n                const marketsResponse = await client.getMarkets();\n                \n                let markets: any[] = [];\n                if (Array.isArray(marketsResponse)) {\n                    markets = marketsResponse;\n                } else if (marketsResponse && typeof marketsResponse === 'object') {\n                    const response = marketsResponse as any;\n                    if (response.data && Array.isArray(response.data)) {\n                        markets = response.data;\n                    }\n                }\n\n                if (!Array.isArray(markets)) {\n                    console.log(\"Unexpected response format:\", marketsResponse);\n                    markets = [];\n                }\n\n                console.log(`Found ${markets.length} total markets from CLOB API`);\n\n                // Debug: Log market data structure\n                if (markets.length > 0) {\n                    const sampleMarket = markets[0];\n                    console.log(\"Sample market structure:\", {\n                        question: sampleMarket.question || sampleMarket.title || 'No title',\n                        active: sampleMarket.active,\n                        closed: sampleMarket.closed,\n                        archived: sampleMarket.archived,\n                        accepting_orders: sampleMarket.accepting_orders,\n                        end_date: sampleMarket.end_date_iso || sampleMarket.endDate,\n                        has_tokens: sampleMarket.tokens && Array.isArray(sampleMarket.tokens),\n                        tokens_count: sampleMarket.tokens ? sampleMarket.tokens.length : 0\n                    });\n                }\n\n                if (markets.length === 0) {\n                    callback?.({\n                        text: \"No markets found at this time. The Polymarket CLOB API may be experiencing issues.\",\n                        content: { markets: [], totalCount: 0 }\n                    });\n                    return true;\n                }\n\n                // Enhanced filtering for active markets with high activity\n                let filteredMarkets = markets.filter((market: any) => {\n                    // Check if market is active and accepting orders\n                    const isActive = market.active !== false;\n                    const isAcceptingOrders = market.accepting_orders !== false;\n                    const isNotClosed = market.closed !== true;\n                    const isNotArchived = market.archived !== true;\n                    \n                    // Check if market has a valid end date that hasn't passed\n                    const hasValidEndDate = market.end_date_iso || market.endDate;\n                    let isNotExpired = true;\n                    if (hasValidEndDate) {\n                        const endDate = new Date(hasValidEndDate);\n                        const now = new Date();\n                        isNotExpired = endDate > now;\n                    }\n                    \n                    // Check if market has valid tokens/outcomes\n                    const hasValidTokens = market.tokens && Array.isArray(market.tokens) && market.tokens.length > 0;\n                    const hasValidOutcomes = market.outcomes && Array.isArray(market.outcomes) && market.outcomes.length > 0;\n                    const hasOutcomes = hasValidTokens || hasValidOutcomes;\n                    \n                    // Check for high activity (volume and liquidity)\n                    const volume24hr = parseFloat(market.volume24hr || market.volume || '0');\n                    const liquidity = parseFloat(market.liquidity || '0');\n                    const hasHighActivity = volume24hr >= minVolume || liquidity >= minVolume * 0.1;\n                    \n                    return isActive && isAcceptingOrders && isNotClosed && isNotArchived && isNotExpired && hasOutcomes && hasHighActivity;\n                });\n\n                console.log(`Filtered to ${filteredMarkets.length} high activity markets`);\n\n                if (filteredMarkets.length === 0) {\n                    // If no markets after filtering, try showing all markets with a warning\n                    if (markets.length > 0) {\n                        console.log(\"Warning: All markets were filtered out. Showing all markets with status indicators.\");\n                        filteredMarkets = markets;\n                    } else {\n                        callback?.({\n                            text: \"No markets found at this time. The Polymarket CLOB API may be experiencing issues.\",\n                            content: { markets: [], totalCount: 0 }\n                        });\n                        return true;\n                    }\n                }\n\n                // Sort markets by activity score (volume + liquidity)\n                filteredMarkets.sort((a: any, b: any) => {\n                    const aVolume = parseFloat(a.volume24hr || a.volume || '0');\n                    const bVolume = parseFloat(b.volume24hr || b.volume || '0');\n                    const aLiquidity = parseFloat(a.liquidity || '0');\n                    const bLiquidity = parseFloat(b.liquidity || '0');\n                    \n                    const aActivityScore = aVolume + (aLiquidity * 0.1);\n                    const bActivityScore = bVolume + (bLiquidity * 0.1);\n                    \n                    return bActivityScore - aActivityScore;\n                });\n\n                // Process markets with comprehensive data\n                const processedMarkets = filteredMarkets.slice(0, limit).map((market: any, index: number) => {\n                    const tokens = market.tokens || market.outcomes || [];\n                    const tokenArray = Array.isArray(tokens) ? tokens : [];\n                    \n                    // Calculate activity metrics\n                    const volume24hr = parseFloat(market.volume24hr || market.volume || '0');\n                    const liquidity = parseFloat(market.liquidity || '0');\n                    const activityScore = volume24hr + (liquidity * 0.1);\n                    \n                    // Calculate freshness\n                    const endDate = new Date(market.end_date_iso || market.endDate || '2099-12-31');\n                    const now = new Date();\n                    const daysUntilEnd = Math.ceil((endDate.getTime() - now.getTime()) / (1000 * 60 * 60 * 24));\n                    const freshness = daysUntilEnd > 0 ? daysUntilEnd : 0;\n                    \n                    return {\n                        condition_id: market.condition_id || market.conditionId || market.id,\n                        question_id: market.question_id || market.questionId,\n                        question: market.question || market.title || market.name || 'Unknown Market',\n                        description: market.description ? \n                            (market.description.length > 200 ? \n                                market.description.substring(0, 200) + '...' : \n                                market.description) : \n                            'No description available',\n                        market_slug: market.market_slug || market.slug,\n                        active: market.active,\n                        closed: market.closed,\n                        archived: market.archived,\n                        accepting_orders: market.accepting_orders,\n                        end_date_iso: market.end_date_iso || market.endDate,\n                        created_date: market.created_date || market.createdAt,\n                        minimum_order_size: market.minimum_order_size || market.minOrderSize || '1.00',\n                        minimum_tick_size: market.minimum_tick_size || market.tickSize || '0.01',\n                        icon: market.icon,\n                        image: market.image,\n                        volume: market.volume || market.volume24hr || market.totalVolume,\n                        volume24hr: market.volume24hr,\n                        liquidity: market.liquidity,\n                        neg_risk: market.neg_risk,\n                        is_50_50_outcome: market.is_50_50_outcome,\n                        tags: Array.isArray(market.tags) ? market.tags.slice(0, 5) : [],\n                        freshness_days: freshness,\n                        activity_score: activityScore,\n                        volume_usd: volume24hr,\n                        liquidity_usd: liquidity,\n                        tokens: tokenArray.map((token: any) => ({\n                            token_id: token.token_id || token.tokenId || token.id,\n                            outcome: token.outcome || token.name || token.title,\n                            price: token.price || token.lastPrice || '0.50',\n                            winner: token.winner,\n                            volume: token.volume\n                        })),\n                        rewards: market.rewards ? {\n                            min_size: market.rewards.min_size,\n                            max_spread: market.rewards.max_spread,\n                            rates_count: market.rewards.rates?.length || 0,\n                            daily_rate: market.rewards.daily_rate\n                        } : null,\n                        last_updated: new Date().toISOString()\n                    };\n                });\n\n                // Create enhanced market summary with activity indicators\n                const marketSummary = processedMarkets.map((market: any, index: number) => {\n                    const outcomes = market.tokens.length > 0 ? \n                        market.tokens.map((t: any) => `${t.outcome} ($${t.price})`).join(' vs ') :\n                        'No outcomes available';\n                    \n                    // Activity level indicators\n                    const activityLevel = market.activity_score > 50000 ? \"\" : \n                        (market.activity_score > 20000 ? \"\" : \n                        (market.activity_score > 10000 ? \"\" : \"\"));\n                    \n                    const urgencyEmoji = market.freshness_days <= 1 ? \"\" : \n                        (market.freshness_days <= 7 ? \"\" : \n                        (market.freshness_days <= 30 ? \"\" : \"\"));\n                    \n                    const tags = market.tags.length > 0 ? market.tags.slice(0, 3).join(', ') : 'No tags';\n                    const endDate = market.end_date_iso ? new Date(market.end_date_iso).toLocaleDateString() : 'No end date';\n                    const volume24hr = market.volume24hr ? `$${parseFloat(market.volume24hr).toLocaleString()}` : 'N/A';\n                    const liquidity = market.liquidity ? `$${parseFloat(market.liquidity).toLocaleString()}` : 'N/A';\n                    \n                    return `${index + 1}. ${activityLevel}${urgencyEmoji} ${market.question.substring(0, 70)}${market.question.length > 70 ? '...' : ''}\n    Outcomes: ${outcomes}\n    24h Volume: ${volume24hr} |  Liquidity: ${liquidity} |  Tags: ${tags}\n    Min Order: $${market.minimum_order_size} |  Ends: ${endDate}\n    Condition ID: ${market.condition_id || 'N/A'}\n     Days remaining: ${market.freshness_days} |  Activity Score: $${market.activity_score.toLocaleString()}`;\n                }).join('\\n\\n');\n\n                const responseContext = composeContext({\n                    state: currentState,\n                    template: `{{recentMessages}}\n\nFound ${processedMarkets.length} high activity betting markets on Polymarket (minimum $${minVolume} volume):\n\nLegend: \n Ultra High Activity (50k+) |  Very High Activity (20k+) |  High Activity (10k+) |  Medium Activity\n Ending Today |  Ending This Week |  Ending This Month |  Long Term\n\n${marketSummary}\n\nThese are the most active and liquid markets available for betting, sorted by activity level. High activity indicates more trading opportunities and better liquidity.\n\nGenerate a response highlighting these high activity markets, emphasizing their trading volume, liquidity, and why they're popular for betting.`\n                });\n\n                const responseText = await generateText({\n                    runtime,\n                    context: responseContext,\n                    modelClass: ModelClass.LARGE,\n                });\n\n                callback?.({ \n                    text: responseText,\n                    content: { \n                        markets: processedMarkets,\n                        totalCount: markets.length,\n                        displayedCount: processedMarkets.length,\n                        activeCount: processedMarkets.filter(m => m.active).length,\n                        acceptingOrdersCount: processedMarkets.filter(m => m.accepting_orders).length,\n                        timestamp: new Date().toISOString(),\n                        source: \"CLOB-API\",\n                        sorting: \"activity_score_desc\",\n                        filters_applied: [\"active_only\", \"accepting_orders\", \"not_expired\", \"has_outcomes\", \"high_activity\"],\n                        minVolume,\n                        activity_stats: {\n                            ultra_high: processedMarkets.filter(m => m.activity_score > 50000).length,\n                            very_high: processedMarkets.filter(m => m.activity_score > 20000 && m.activity_score <= 50000).length,\n                            high: processedMarkets.filter(m => m.activity_score > 10000 && m.activity_score <= 20000).length,\n                            medium: processedMarkets.filter(m => m.activity_score <= 10000).length,\n                            ending_soon: processedMarkets.filter(m => m.freshness_days <= 7).length\n                        }\n                    }\n                });\n                return true;\n                \n            } catch (apiError) {\n                console.error(\"CLOB API failed:\", apiError);\n                throw new Error(`Failed to fetch high activity markets from CLOB API: ${apiError instanceof Error ? apiError.message : String(apiError)}`);\n            }\n            \n        } catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            console.error(\"Get high activity markets error:\", errorMessage);\n            callback?.({\n                text: `Error getting high activity markets: ${errorMessage}. Please check your internet connection and try again.`,\n                content: { error: errorMessage },\n            });\n            return false;\n        }\n    },\n    examples: [\n        [\n            {\n                user: \"{{user1}}\",\n                content: {\n                    text: \"Show me the high volume markets\",\n                },\n            },\n            {\n                user: \"{{agentName}}\",\n                content: {\n                    text: \"Here are the high activity markets on Polymarket, sorted by trading volume and liquidity...\",\n                    action: \"GET_HIGH_ACTIVITY_MARKETS\",\n                },\n            },\n        ],\n        [\n            {\n                user: \"{{user1}}\",\n                content: {\n                    text: \"What are the most popular betting markets right now?\",\n                },\n            },\n            {\n                user: \"{{agentName}}\",\n                content: {\n                    text: \"I'll fetch the most active and popular markets for you, focusing on high volume and liquidity...\",\n                    action: \"GET_HIGH_ACTIVITY_MARKETS\",\n                },\n            },\n        ],\n    ],\n};\n","import type { Plugin } from \"@elizaos/core\";\nimport { polymarketProvider } from \"./provider\";\nimport { \n    placeBetAction, \n    checkBalanceAction, \n    getMarketsAction, \n    getMoreMarketsAction,\n    getMarketAction,\n    getHighActivityMarketsAction\n} from \"./actions\";\n\n// Initial banner\nconsole.log(\"\\n\");\nconsole.log(\"        POLYMARKET PLUGIN               \");\nconsole.log(\"\");\nconsole.log(\"  Initializing Polymarket Plugin...     \");\nconsole.log(\"  Version: 0.0.1                        \");\nconsole.log(\"\");\n\nconst initializeActions = () => {\n    try {\n        // Test environment variables\n        const host = process.env.CLOB_API_URL || \"https://clob.polymarket.com\";\n        const chainId = process.env.CHAIN_ID || \"137\"; // Default to Polygon mainnet\n        const apiKey = process.env.POLYMARKET_API_KEY;\n        const secret = process.env.POLYMARKET_SECRET;\n        const passphrase = process.env.POLYMARKET_PASSPHRASE;\n\n        console.log(` Polymarket Host: ${host}`);\n        console.log(`  Chain ID: ${chainId}`);\n        \n        if (apiKey && secret && passphrase) {\n            console.log(\" Authenticated mode: Trading actions available\");\n        } else {\n            console.log(\" Read-only mode: Only market data actions available\");\n            console.log(\"   To enable trading, set POLYMARKET_API_KEY, POLYMARKET_SECRET, and POLYMARKET_PASSPHRASE\");\n        }\n\n        // Return all actions - they will handle auth internally\n        const actions = [\n            getMarketsAction,\n            getMoreMarketsAction, \n            getMarketAction,\n            getHighActivityMarketsAction,\n            checkBalanceAction,\n            placeBetAction\n        ];\n\n        console.log(\" Polymarket actions initialized successfully.\");\n        console.log(` Available actions: ${actions.map(a => a.name).join(', ')}`);\n        \n        return actions;\n    } catch (error) {\n        console.error(\" Failed to initialize Polymarket actions:\", error);\n        return []; // Return empty array instead of failing\n    }\n};\n\nexport const polymarketPlugin: Plugin = {\n    name: \"[Polymarket] Integration\",\n    description: \"Polymarket prediction markets integration plugin - get market data and place bets\",\n    providers: [polymarketProvider],\n    evaluators: [],\n    services: [],\n    actions: initializeActions(),\n};\n\nexport default polymarketPlugin;\n\n// Export individual actions for direct use\nexport {\n    placeBetAction,\n    checkBalanceAction, \n    getMarketsAction,\n    getMoreMarketsAction,\n    getMarketAction,\n    getHighActivityMarketsAction\n} from \"./actions\";\n\nexport { polymarketProvider, getPolymarketClient } from \"./provider\";"]}